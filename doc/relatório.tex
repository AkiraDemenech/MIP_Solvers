% Título do projeto: Avaliação de resolvedores para um problema clássico de otimização.
% Palavras chaves: Programação linear inteira mista, modelagem, softwares de otimização.

% Poderá ter até 5000 (cinco mil) palavras, considerando todas as seções do trabalho, inclusive título, resumo, referências e outras.

\documentclass[]{article}
\usepackage{amsfonts} 

%opening
\title{}
\author{Guilherme Akira Demenech Mori}

% https://github.com/akirademenech/MIP_Solvers/blob/main/doc/relat%C3%B3rio.tex

\begin{document}

\maketitle

\begin{abstract}

\end{abstract}

\section{Introdução}

\section{Revisão da literatura}


\section{Definição e modelagem dos problemas}

	Consideramos três casos do problema de localização de facilidades com capacidade limitada 
	(\textit{Capacitated Facility Location Problem}, CFLP):
	com fonte única (\textit{single-source}, SS) 
	e com múltiplas fontes (\textit{multi-source}, MS), 
    esse último com e sem incompatibilidades de clientes (\textit{customer incompatibilities}, CI). 
	
\subsection{SS-CFLP: problema de localização de facilidades com capacidade limitada e fonte única}
	% http://old.math.nsc.ru/AP/benchmarks/CFLP/cflp-eng.html
	
	No caso de fonte única das instâncias adotadas, a limitação de capacidade é uma mesma constante $s$ fixada para todas as facilidades.
	O valor do custo fixo $f$ de abertura também é o mesmo para todas.
	O conjunto de facilidades é dado por $I$ e o de clientes por $J$.
	A formulação adotada traz a demanda $p_{ij}$ do cliente $j \in J$ se for atendido pela facilidade $i \in I$, 
	podendo existir $i$ que não seja capaz de atender $j$.
	O custo de transporte $g_{ij}$ de $i \in I$ para $j \in J$ é referente à toda a demanda desse cliente $j$ para a facilidade $i$, não ao transporte de cada unidade (ou medida) requerida.
	
	$x_{ij}$ indica se a facilidade $i \in I$ atenderá a demanda do cliente $j \in J$ 
	e a variável binária $y_i$ indica se $i $ será aberta ou não, sendo exigido que a facilidade seja aberta para poder atender demandas de clientes.
	
	São aplicadas as restrições de abertura e capacidade das facilidades (\ref{ss:const:capacity}) e de satisfação da demanda (\ref{ss:const:demand}).
	
	\begin{equation}
		\label{ss:const:capacity}		
		\sum_{j \in J} x_{ij} p_{ij} \le y_i s 
		\quad
		\forall i \in I
	\end{equation}	

	\begin{equation}
		\label{ss:const:demand}		
		\sum_{i \in I} x_{ij} \ge 1 
		\quad
		\forall j \in J
	\end{equation}

	As variáveis devem ser binárias (\ref{ss:const:dom}) 
	e o objetivo é minimizar os custos de abertura e transporte (\ref{ss:obj}).
	
	\begin{equation}
		\label{ss:const:dom}		
		x_{ij}, y_i \in \{0, 1\}
		\quad
		\forall i \in I, j \in J
	\end{equation}	
	
	\begin{equation}
		\label{ss:obj}		
		\min \sum_{i \in I} 
		(
			f y_i + \sum_{j \in J} g_{ij} x_{ij}
		)
	\end{equation}

	A relaxação linear das variáveis $x$ (da forma $x_{ij} \in [0,1]$) transformaria esse caso em um problema com múltiplas fontes, 
	o modelo, porém, se tornaria bastante estranho:  
	demandas $p_{ij}$ diferentes poderiam ser parcialmente atendidas, satisfazendo uma demanda mista não-planejada.
	
\subsection{MS-CFLP: problema de localização de facilidades com capacidade limitada e múltiplas fontes}
	

 
	No caso de fontes múltiplas, para o conjunto de facilidades $I$ e de clientes $J$, 
	a capacidade $s_i$ e o custo fixo de abertura $f_i$ não são necessariamente os mesmos para todo $i \in I$, 
	enquanto a demanda $d_j$ de $j \in J$ é a mesma
	independente de qual (ou quais) facilidade(s) a satisfaça(m). 
	Nas instâncias utilizadas, o custo de transporte $c_{ij}$, por unidade, da facilidade $i$ para o cliente $j$ existe para todos os pares.
	
	Nesse caso, $x_{ij}$ indica quantas unidades a facilidade $i \in I$ suprirá ao cliente $j \in J$ 
	e, novamente, a variável binária $y_i$ indica se a facilidade $i \in I$ será aberta ou não.

    
	
	Da mesma forma que o caso anterior, são aplicadas as restrições de capacidade das facilidades (\ref{ms:const:capacity}) e de satisfação da demanda (\ref{ms:const:demand}), dessa vez variando a capacidade de acordo com a facilidade e mantendo a demanda do cliente a mesma para todas as facilidades que o atenderem.
	
	\begin{equation}
		\label{ms:const:capacity}		
		\sum_{j \in J} x_{ij} \le y_i s_i 
		\quad
		\forall i \in I
	\end{equation}	
	
	\begin{equation}
		\label{ms:const:demand}		
		\sum_{i \in I} x_{ij} \ge d_j 
		\quad
		\forall j \in J
	\end{equation}
	
	A abertura continua sendo binária, o atendimento deve ser inteiro (\ref{ms:const:dom}) 
	e o objetivo é minimizar os custos de abertura e transporte (\ref{ms:obj}).
	
	\begin{equation}
		\label{ms:const:dom}		
		y_i \in \{0, 1\}, 
		\ x_{ij} \ge 0, 
		\ x_{ij} \in \mathbb{Z}
		\quad
		\forall i \in I, j \in J
	\end{equation}	
	
	\begin{equation}
		\label{ms:obj}		
		\min \sum_{i \in I} 
		(
		f_i y_i + \sum_{j \in J} c_{ij} x_{ij}
		)
	\end{equation}

 \subsection{MS-CFLP-CI: problema de localização de facilidades com capacidade limitada, múltiplas fontes e incompatibilidades de clientes}
    % https://link.springer.com/article/10.1007/s00500-022-07600-z 
    
 
	No modelo utilizado \cite{mess}, é introduzido o conjunto $\Gamma \subseteq J^2$ de pares incompatíveis $\{ j_1, j_2 \} \in \Gamma$, 
	nos quais os clientes $j_1, j_2 \in J$ não podem ser atendidos simultaneamente por uma mesma facilidade $i \in I$.

    Aqui aplicam-se as mesmas restrições de domínio (\ref{ms:const:dom}), de capacidade (\ref{ms:const:capacity}), de satisfação da demanda (\ref{ms:const:demand}) e a mesma função objetivo (\ref{ms:obj}) do modelo MS-CFLP, sendo somente adicionadas as restrições de incompatibilidade entre clientes.
 
	A disjunção dos pares de clientes incompatíveis pode ser perfeitamente formulada pela técnica \textit{big M} (\ref{ms:const:incomp}), 
	uma vez que o limitante superior $s_i$ é garantido para todo $x_{ij}$.
	
	\begin{equation}
		\label{ms:const:incomp}		
		x_{ij_1} \le \lambda_{ij_1j_2} s_i, 
		\ x_{ij_2} \le (1 - \lambda_{ij_1j_2}) s_i 
		\quad
		\forall i \in I, 
		\ \{ j_1, j_2 \} \in \Gamma  
	\end{equation}

    As variáveis de disjunção \textit{big M} também devem ser binárias (\ref{ci:const:dom}).

    \begin{equation}
		\label{ci:const:dom}		
		\lambda_{ij_1j_2} \in \{0, 1\}
		\quad
		\forall i \in I,  		
		\ \{ j_1, j_2 \} \in \Gamma
	\end{equation}

	Alternativamente, podemos definir as restrições de pares incompatíveis (\ref{ms:const:incomp}) para conjuntos incompatíveis $u_k \in \Gamma'$ (\ref{ms:const:incomp_alt}). 
	Também é razoável utilizar $d_j$ como limitante superior, 
	já que a minimização dos custos não-negativos torna a demanda do cliente $j \in J$ o máximo desejável para o atendimento $x_{ij}$ da facilidade $i \in I$.   
	
	\begin{equation}
		\label{ms:const:incomp_alt}		
		x_{ij_1} \le \lambda_{ij_tk} d_{j_t} 
		\quad
		\forall i \in I, 
		\ j_t \in u_k,
		\ u_k = \{ j_1, j_2 ... j_n \},
		\ u_k \in \Gamma'  
	\end{equation}
	
	A disjunção seria generalizada para os conjuntos de $n$ clientes limitando a $n-1$ clientes incompatíveis $j_t \in u_k$ atendidos pela mesma facilidade $i \in I$ (\ref{ms:const:disj_incomp_alt}). 
	
	\begin{equation}
		\label{ms:const:disj_incomp_alt}
		\sum_{j_t \in u_k} \lambda_{ij_tk} \le n - 1 
		\quad
		\forall i \in I, 
		\ u_k = \{ j_1, j_2 ... j_n \},
		\ u_k \in \Gamma'  
	\end{equation}

	Generalizamos o conjunto de conjuntos de clientes incompatíveis para $\Gamma' \subseteq \{ B / B \subseteq J \}$ e adaptamos a variável binária $\lambda_{ij_tk} \in \{0,1\}$. 
	 


	\section{Experimentos computacionais}
	
	\section{Referências}
\bibliographystyle{apalike}
\bibliography{bibliografia.bib} % https://github.com/akirademenech/MIP_Solvers/blob/main/doc/bibliografia.bib

\end{document}
